<!DOCTYPE  html>

<html lang="pt-br">  
  <head>
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Description" content="A site that helps students understand how pointers work.">

    <link rel="stylesheet" type="text/css" href="index.css">
    <link rel="stylesheet" type="text/css" href="memory.css">
    <title>Ponteiros</title>
    <link rel="icon" id="iconImage" href="icon.svg" type="image/icon type">
  </head>
  <body>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
  	<header>
  		<h1>COMO<br><big><span style="color:var(--titlesColor);">*</span>PONTEIROS</big><br>FUNCIONAM</h1>
  	</header>

    <main>
      <section id="codeBlocks">
        <div id="Text">
          <textarea id="textbox" class="box" spellcheck="false" placeholder="Digite aqui seu código em C ou C++." autofocus="">#include <stdio.h>
int main() {
  /* Digite aqui seu código em C */

  return 0;
}
          </textarea>

          <!-- Extra div to make the absolute position of the lang_options div relative to it-->
          <div>
            <div id="lang_options" >
              <div class = "arrow" ></div>
              <p id = "lang_selected" title="Linguagem"  >C</p>
              <p id = "lang_C" class = "lang_item" >C</p>
              <p id = "lang_Cpp" class = "lang_item" >C++</p>
            </div>
          </div>


          <button id="button" title="Compilar e executar" onclick="vueApp.sendCode()">Compilar e executar</button>
        </div>


        <div id="Blocks">

          <div id="inputBlock">
            <label for="inputC">input</label>
            <textarea id="inputC" class="box" spellcheck="false" placeholder="Digite aqui todas as entradas do seu código separadas por espaço/enter."></textarea>
          </div>

          <div id="outputBlock">
            <label for="outputC">output</label>
            <div id="outputC" class="box"></div>
          </div>
        </div>



      </section>
      <section id="memoryContainer">
        <div>
          <memory :vars="stack"></memory>
        </div>
        <div>
            <memory :vars="heap"></memory>
        </div>
      </section>
    </main>


    <footer>Documentação e código disponíveis em <a href="https://github.com/arturo32/HowPointersWork">github.com/arturo32/HowPointersWork</a></footer>


    <!-- JQuery library-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!--    Arrows library-->
    <script src="leader-line.min.js"></script>
    <script type="text/javascript">
      let globalArrows = [];
      const editorIndentSpaces = 2;
      const indentString = " ".repeat(editorIndentSpaces);
      function indent(event) {
        if(event.code === 'Enter') {
          const textarea = event.target;
          const v = textarea.value;
          const startPos = textarea.selectionStart;
          const endPos = textarea.selectionEnd;
          event.preventDefault();

          //Get the current indentation level and prefix the new line with the same
          const prevLinePos = v.slice(0, startPos).lastIndexOf("\n") + 1;
          const prevLine = v.slice(prevLinePos, endPos);
          const levels = prevLine.match(/^ */)[0].length / editorIndentSpaces;
          const indentation = indentString.repeat(levels);
          textarea.value =
              v.slice(0, endPos) + "\n" + indentation + v.slice(endPos);

          //Set the cursor position
          const newCursorPos = endPos + 1 + indentation.length;
          textarea.setSelectionRange(newCursorPos, newCursorPos);
        }
      }
      document.querySelector('#textbox').addEventListener('keydown', indent);

    </script>

    <script type="text/javascript" src="api.js"></script>
    <script type="module" src="memoryContainer.js"></script>


  </body>



</html>
